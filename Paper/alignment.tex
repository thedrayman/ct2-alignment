

\documentclass[conference]{IEEEtran}

\ifCLASSINFOpdf
   \usepackage[pdftex]{graphicx}
  \graphicspath{{../pdf/}{../jpeg/}}
\else
\fi

\usepackage{color,listings}
\usepackage{cite}

\lstset{language=[Sharp]C, % Grundsprache ist C und Dialekt ist Sharp (C#)
	captionpos=b, % Beschriftung ist unterhalb
	frame=lines, % Oberhalb und unterhalb des Listings ist eine Linie
	basicstyle=\ttfamily, % Schriftart
	keywordstyle=\color{blue}, % Farbe fÃ¼r die Keywords wie public, void, object u.s.w.
	commentstyle=\color{green}, % Farbe der Kommentare
	stringstyle=\color{red}, % Farbe der Zeichenketten
	numbers=left, % Zeilennummern links vom Code
	numberstyle=\tiny, % kleine Zeilennummern
	numbersep=5pt,
	breaklines=true, % Wordwrap a.k.a. Zeilenumbruch aktiviert
	showstringspaces=false,
	% emph legt Farben fÃ¼r bestimmte WÃ¶rter manuell fest
	emph={double,bool,int,unsigned,char,true,false,void},
	emphstyle=\color{blue},
	emph={Assert,Test},
	emphstyle=\color{red},
	emph={[2]\using,\#define,\#ifdef,\#endif}, emphstyle={[2]\color{blue}}
}

\usepackage{amsmath}
\usepackage{url}

%\usepackage{ngerman}
%\usepackage[latin1, utf8]{inputenc}
\usepackage[latin1]{inputenc}
%\usepackage[utf8x]{inputenc}

\hyphenation{op-tical net-works semi-conduc-tor}

\newcommand{\algoSW}{Smith-Waterman algorithm}


\begin{document}

\title{Location Prediction with Alignment Algorithm on Google Location Data}

\author{\IEEEauthorblockN{Olga Groh\IEEEauthorrefmark{1},
Johann G\"otz\IEEEauthorrefmark{2},
Fabian Fr\"olich\IEEEauthorrefmark{3}}
\IEEEauthorblockA{Faculty of Electrical Engineering and Computer Science\\
University of Kassel,\\
Kassel, Germany\\
Email: {\{\IEEEauthorrefmark{1}o\_groh, \IEEEauthorrefmark{2}uk017305, \IEEEauthorrefmark{3}f.fr\"olich\}@student.uni-kassel.de }}}
	

\maketitle

\begin{abstract}

\end{abstract}

\IEEEpeerreviewmaketitle

\section{Introduction}\label{section:introduction}
Das Wissen um die Position einer Person spielt in der heutigen, digitalen Welt eine wichtige Rolle. In allen denkbaren Bereichen kann eine genaue Position hilfreich sein oder gar Leben retten. Einen Schritt weiter geht die Positionsvorhersage, bei der der zukünfitige Aufenthaltsort einer Person bestimmt. Damit ergibt sich nicht nur das Wissen, wo die Person ist, sondern auch wo sie zu hoher Wahrscheinlichkeit als nächstes sein wird. Um die Bedeutung dieser Technologie ein wenig zu verdeutlichen, seien an dieser Stelle ein paar Szenarien beschrieben.

Ein lebensrettender Einsatz ist die Anwendung der Positionsbestimmung bzw. -vorhersage bei älteren Menschen. Ausgestattet mit den richtigen Geräten, ist es heute möglich den Gesundheitszustand einer Person zu erfassen und Aussagen über diese zu treffen. Abhängig von diesem Zustand kann dann bei einem Sturz oder einer Verschlechterung des Zustand Hilfe geholt werden. Dabei ist es womöglich sehr wichtig, wo sich die Person befindet. Über die Positionsbestimmung ist es möglich die Person zu finden - sofern diese Bestimmung aktuell ist. Über die Positionsvorhersage ist es zusätzlich möglich Aussagen über den Aufenthaltsort zu machen, auch wenn das Gerät der Positionsbestimmung vergessen wurde oder versagt.

Auch in anderen Gefahren- oder Rettungsszenarien ist die genaue Position hilfreich. Man stelle sich einen Unfall auf der Autobahn vor, dabei ist es für die Rettungskräfte von sehr großen Vorteil zu Wissen auf welcher der Straße sich der Unfall ereignet hat. Hierbei ist die exakte Bestimmung der Position wichtiger als die Vorhersage. Allerdings gibt es auch Situationen, da ist eine Vorhersage für die Rettungskräfte von Bedeutung. Als Beispiele seinen hier die Rettung von Wanderern bei schlechtem Wetter oder von Personen nach einer Naturkatastrophe genannt.

Weitere Situationen für die Wichtigkeit der Vorhersage von Positionen von Personen sind in der Verbrechensbekämpfung und -aufklärung denkbar. Für Unternehmen ist die Vorhersage ebenso ein wichtiges Instrument, lassen sich doch damit Werbeanzeigen personenbezogen anzeigen und verbreiten. Aber auch für eine Privatperson kann die Vorhersage der eigenen Position hilfreich sein, bedenkt man den steigenden Einsatz von Smart-Home-Technik. Mit Vorhersagen über die Position des Eigentümers, kann das heimische System wissen, wann die Person zu Hause eintrifft und somit die Heizung rechtzeitig einschalten.

All die genannten Szenarien sind abhängig von Positionsbestimmung und -vorhersage. Dabei ist es heutzutage kaum noch ein Problem die dazu benötigeten Daten zu erhalten. In den letzten zehn Jahren hat sich das Smartphone zu einem nützlichen und allseits mitgeführen Gefährten gemausert. Die Mächtigkeit des Begleiters wird trotzdem von den meisten unterschätzt. Mit den erfassten, und in den meisten Fällen gespeichterten Daten, lassen sich Aussagen über den Besitzer treffen.Es lässt sich gar ein ziemlich genaues persönliches Profil erstellen. Mit den erfassten Positionsdaten lässt sich, mit Hilfe der richtigen Algorithmen und Methoden, eine Positionsvorhersage erstellen. 

In dieser Arbeit wird versucht, eine Positionsvorhersage mit dem Ansatz des Alignments zu erstellen. Die dabei genutzten, aufgezeichneten Positionsdaten wurden vorab durch verschiedene Smartphones und Personen erfasst. Mit Hilfe der Daten und einem Alignment-Algorithmus werden wir versuchen die nächste Position vorherzusagen.
%Voraussage der Location von alten Menschen und rechtzeitiges Handeln, wenn sie sich nicht an der entsprechenden Position befinden (Verhalten)

%Locations werden oft Ã¼ber bestimmte Applikationen automatisch von Smartphones aufgezeichnet

%Anbieten von personenbezogener Werbung an den vorhergesagten Standort

%Smart-Home Bereich (Temperatur, Energiemanagement, Komfort)


\section{Related Work}\label{section:relatedWork}
Zu Location Prediction gibt es eine Menge Forschungsmaterial.
Alignment Algorithmen bieten ein Ähnlichkeitsmaß für beliebige Folgen von Datenpunkten, auch Sequenzen genannt. Das heißt die Anwendung solcher Algorithmen ermöglicht es zwei Sequenzen auf ihre Ähnlichkeit zu untersuchen und somit zu Vergleichen. Eine häufige Anwendung findet in der Bioinformatik statt. Hierbei werden DNA- oder Protein-Sequenzen auf evolutionsbedingte Verwandtschaft untersucht. Ein Beispiel hierfür findet sich in \cite{waterman1995introduction}.

Sigg et al. \cite{sigg2010alignment} beschreiben einen Ansatz um mittels Alignment vorhersagen anhand von Kontextsequenzen machen zu können. Die Anwendung von Alignment Algorithmen ermöglicht es Sigg et al. die ähnlichsten vorkommende Teilsequenzen zu finden und anhand dieser den nächsten Eintrag vorhersagen zu können. Dafür verwenden sie unter anderem  Needleman-Wunsch-Algorithmus \cite{needleman1970general}, welcher mittels Backtracking ein globales Optimum findet. Ein Ähnlicher Algorithmus ist der Hirschberg-Algorithmus \cite{hirschberg1975linear}, welcher ebenfalls ein globaler Algorithmus ähnlich wie der Needleman-Wunsch-Algorithmus ist.

Unser Ansatz basiert ebenfalls auf Alignment Algorithmen. Dabei verwenden wir im Gegensatz zu \cite{sigg2010alignment} den Smith-Waterman-Algorithmus \cite{smith1981identification}
innerhalb unseres Location Prediction Ansatzes. 
Dieser Algorithmus ist im Gegensatz zum Needleman-Wunsch-Algorithmus und Hirschbergalgorithmus in der Lage das lokale Optimum zu finden. Dies hat den Vorteil, dass lokale Übereinstimmungen nicht wie bei einer globalen Betrachtung übersehen werden können.

Neben der Verwendung von Alignment Algorithmen gibt es weitere Ansätze zur Location Prediction. Craig et al. \cite{craig2017region} nutzen einen Clustering-Ansatz um Aufenthaltsorte einer Person mittels Cluster zu definieren. Dies geschieht, in dem ein Ort in möglichst kleine Regionen eingeteilt wird und anschließend ähnliche benachbarte Regionen zu größeren Clustern kombiniert werden. Basierend auf diesen Regionen ist das Ziel den nächsten Ort an dem sich eine Person befinden wird vorherzusagen. Dabei wird anhand des aktuellen bzw. der vorherigen Standorte geprüft auf welcher Strecke sicher der Nutzer befindet und Anhand dieser Information das Cluster bestimmt in welchem sein nächstes Ziel liegen könnte.  
Im Gegensatz zu unseren Ansatz liefert Clustering keine optimale Lösung, sondern führt eine Reduktion der Daten durch und ermöglicht somit die Verwendung auf leistungsschwachen Geräten.

Rjeily et al. \cite{8167546} nutzen einen Sequenz Prediction Ansatz um ein Herzfehler eines Patienten festzustellen.
Dazu werden diskrete sowie kontinuierliche Datensequenzen verwendet, z.\,B.Schmerzen in der Brust auf einer Skala von 1 bis 4 und Blutdruckwerte. Dabei basiert Ihr Ansatz auf einer Erweiterung des Compact Prediction Tree Algorithmus \cite{gueniche2013compact}. Dieser Algorithmus ist in der Lage anhand einer gegebenen Sequenz das nächste Symbol zu schätzen, welches die Patienten zu Risikogruppen zuordnet. Die Sequenz wird dabei genutzt um zu überprüfen in welche Risikokategorie ein Patient eingestuft werden kann. Im Vergleich zu dem hier präsentierten Ansatz arbeitet der Algorithmus von Rjeily et al.auf komplexen hochdimensionalen Daten wodurch der Algorithmus zu komplex für die hier verwendeten Daten ist. Da sich die hier betrachteten Daten aus reinen diskreten Symbolen zusammensetzten, wäre die Anwendung eines solchen Algorithmus für unseren Ansatz ungeeignet.

Zusammenfassend findet Sequenzprediction eine breite Anwendung und eignet sich daher auch potentiell zu Verwendung von Location Prediction.
%\cite{craig2017region}

\section{Conception}\label{section:conception} 

%Alignment wird normalerweise in der Biologie zum Vergleich von DNA-Sequenzen genutzt

%Wir nutzen Google Location Data, da Google es anbietet und fast jeder heutzutage ein Smartphone besitzt

%Alignment lÃ¤sst sich auf Location data anwenden

Heutzutage besitzt fast jeder Mensch ein Smartphone. Der Vorteil ist, dass die Daten bereits über Google Location Data \cite{37522} automatisch über eine Applikation aufgenommen werden, die auf Android-Systemen bereits bei einem Kauf des Geräts mitgeliefert wird. Die täglich aufgezeichneten Daten beinhalten genaue Positionskoordinaten und Zeiten bis hin zur Ortsbezeichnungen und Ortsgenauigkeiten. 

Die hier genutzten Daten stammen aus dem Google Location-Projekt \cite{google-location} und liegen als .CSV-Datei vor, die auszugweise im folgenden Listing \ref{listing:exampledata}  dargestellt ist.

\begin{lstlisting}[basicstyle=\small, caption={Example of collected location data}, label=listing:exampledata]
timestamp, accuracy, logitude, latitude, altitude, description
1311761703, 36, 9.472.948, 51.311.078, 0, WORK
1311747139, 55, 9.403.654, 51.404.189, 0, HOME
\end{lstlisting}

Für die Vorhersage der Location werden die einzelnen Datensätze der .CSV-Datei nach Zeit (\texttt{timestamp}) sortiert. Die Beschreibung (\texttt{description}) definiert den Ort des Nutzers anhand der Koordinaten (\texttt{logitude}, \texttt{latitude} und \texttt{altitude}). Für unseren Ansatz benötigen wird lediglich diese Beschreibung in der korrekten, zeitlichen Reihenfolge.

%Idee der Implementierung und Grund für die Entscheidung

Die Idee ist es nun, den nächsten Ort einer Person anhand ihrer jetzigen und vergangenden Positionen vorherzusagen. Dafür betrachten wir die Daten als eine lange Sequenz, wie in Fig. \ref{fig:diagram} dargestellt. Sie wird an einer bestimmten Stelle - üblicherweise in der Mitte - zu einer History- und einer Testsequenz gespalten. Somit entsteht eine Historysequenz, die abrupt endet und deren \textit{l} Zeichen man vorhersagen kann. Nun wird der Historysequenz eine Suchsequenz mit den letzten \textit{x} Zeichen entnommen. Das Alignment wird dann auf die Test- und Suchsequenz angewendet, um die ähnlichste Sequenz zu finden. Alle Zeichen danach bilden die Vorhersagesequenz.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.49\textwidth]{images/alignment_diagram3.pdf}
	\caption{Concept of sequence alignment}
	\label{fig:diagram}
\end{figure}

Der Algorithmus, der sich für dieses Problem am besten eignet, ist der \algoSW-Algorithmus, da er auf unterschiedlich lange Sequenzen angewendet werden kann, um lokal den kleinst möglichen Match zu finden. Ein anderer Vorteil ist, dass die Sequenzen nicht identisch sein müssen, sodass ebenfalls auch ähnliche Sequenzen gefunden werden können. Algorithmen wie Needleman-Wunsch und Hirschberg eignen sich dafür weniger, da diese nur global die größte, ähnlichste Sequenz aus den beiden Sequenzen errechnet.

%Erklärung Waterman-Smith

Der \algoSW ist ein lokaler Optimierungsalgorithmus, der auf zwei Zeichenketten-Sequenzen arbeitet. Im ersten Schritt werden beide Sequenzen so angeordnet, dass sie eine Matrix bilden, von denen die erste Spalte und Zeile jeweils mit Nullen initialisiert wird. Jedes Zeichen aus Sequenz A wird mit jedem Zeichen aus Sequenz B iterativ, beginnend mit dem ersten Index in der Matrix, verglichen. Anhand von Rekurrenzen wird dann ein Ähnlichkeitsmaß (Score) berechnet. Handelt es sich beispielsweise um einen Match, so erhöht sich der Score um einen festgelegten Rekurrenzwert. Analog dazu verringert sich der Score dementsprechend. Ebenso kann es passieren, dass die Sequenzen zwar ähnlich, aber durch eine Lücke nicht mehr identisch sind. Bei einer Lücke handelt es sich entweder um eine Insertion oder eine Deletion in der Sequenz. Die nächsten Einträge werden genauso in Abhängigkeit vom vorherigen Wert berechnet. Im Gegensatz zum Needleman-Wunsch-Algorithmus kann der Eintrag in der Matrix beim \algoSW-Algorithmus nicht negativ sein. Sollte er jedoch in den negativen Bereich fallen, wird der Wert wieder auf Null gesetzt. Anschließend sucht man nach dem höchsten Wert in der gesamten Matrix. Dies ist der optimale Wert. Ein Alignment ist dann optimal, sobald es solch einen Wert besitzt. Eine Matrix kann mehrere Maxima haben, daher kann das Alignment an mehreren Stellen optimal sein. 

Im zweiten Schritt werden die entsprechenden ähnlichsten Stellen anhand des Traceback-Algorithmus erfasst. Ausgehend vom maximalen Wert wird der Berechnungspfad rückwärts diagonal nach Nord-Westen auf den Wert Null ausgeschlossen zurückverfolgt. Daraus ergeben sich Indizes für Start und Ende der Match-Sequenz.

Um den Algorithmus besser zu verdeutlichen, betrachte man nun das folgende Beispiel.

\begin{figure}
	\centering
	\includegraphics[width=0.45\textwidth]{images/watermansmith.jpg}
	\caption{Example of Smith-Waterman algorithm\cite{ibm}}
	\label{fig:watermansmith}
\end{figure}

%Beispiel

\subsection{Example}

In Fig. \ref{fig:watermansmith} sind zwei Sequenzen "{}GCCCTAGCG"{} und "{}GCGCAATG"{} gegeben, die zusammen eine Matrix bilden. 

\begin{enumerate}
	\item Die erste Spalte und Zeile der Matrix wird mit Nullen initialisiert werden.
	\item Ausgehend von dem ersten Index (0,0) wird der Score iterativ anhand von Rekkurenzen ausgerechnet. Für (G,G) ergibt der Score 1, da dies ein Match ist. Für (G,C) hingegen ergibt der Score 0, da dies kein Match (und somit mit -1 versehen wird) ist und aus dem Grund, dass der Wert nun negativ ist, nach der Regel auf 0 gebracht. 
	\item Ist die Matrix vollständig berechnet, wird dort anschließend nach dem höchsten Wert gesucht. In diesem Fall beträgt er 3.
	\item Der Traceback-Algorithmus folgt dem Berechnungspfad diagonal nach Nord-Westen rückwärts bis zum Wert 0. Daraus ergibt sich ein Pfad der Länge 4, wobei die Null nicht dazuzählt. D.h. die Pfadlänge beträgt 3.
	\item Aus der Matrix kann man herauslesen, dass das Ergebnis des lokalen Alignments "{}GCG"{} lautet.
\end{enumerate}

Im nächsten Kapitel betrachten wir die genaue Implementierung in der Programmiersprache Java.

\section{Implementation}\label{section:implementation}

Der Zugriff auf die Daten erfolgt über herunterladbare KML-Dateien. Zum Zweck des Programms wurden sie in das CSV-Format konvertiert.

Solch eine Datei ist folgendermaßen aufgebaut: Die Spalten enthalten Werte "{}longitude"{}, "{}latitude"{} und "{}altitude"{} für die Ortsbestimmung mit dem dazugehörigen "{}timestamp"{} und eine Ortsbezeichnung mit dem Titel "{}unknown"{}, sowie die Ortsgenauigkeit "{}accuracy"{}. Zur Vorhersagebestimmung wurden in dieser Arbeit nur Ortsbezeichnungen, sortiert nach ihrer Zeit, verwendet. Alle anderen Werte können mittels Alignment nicht auf trivialer Weise vorhergesagt werden und werden daher nicht berücksichtigt.

%Wie sehen die Daten aus?

%CSV Aufbau

%Import der CSV

Um die von Google gesammelten Daten zu verwenden, müssen diese eingelesen werden. Zunächst einmal wird KML-Datei beispielweise mit einem externen Programm in das CSV-Format konvertiert. Die Daten werden durch ein Semikolon voneinander getrennt.  

\section{Evaluation}\label{section:evaluation}

Es wurden uns Daten von drei unterschiedlichen Personen bereitgestellt, die jeweils einen Zeitraum von einem Monat bis hin zu mehreren Monaten aufweisen.

%Wie schnell ist der Algorithmus auf groÃen Daten?

%LÃ¤nge der Vergleichssequenz

%Grafiken/Bilder fÃ¼r vorhergesagte Locations (und alte Locations)

%Nutzbarkeit für Real-Time-Anwendung


\section{Conclusion}\label{section:conclusion}

%Erneute Zusammenfassung der Ergebnisse
Wir haben Daten von der Google Location History von verschiedenen Nutzern entnommen und haben versucht eine Vorhersage über die nächsten Standorte zumachen. Für unseren Ansatz haben wir den Smith-Waterman-Algorithmus verwendet.
\newline
%Was ist dabei herausgekommen?

%Was kÃ¶nnte man noch machen?
In der Zukunft wollen wir unseren Ansatz noch dahingehend verbessern das wir unser Programm besser auf Echtzeitanwendungen abstimmen wollen und das die Daten direkt aus der Google Location History entnommen werden. Eine mögliche Anwendung könnte sein das ein Nutzer in Echtzeit sehen kann wie sich die Prediction ändert währen er den Ort wechselt.

%\newpage
\bibliographystyle{IEEEtran}
\bibliography{alignment}


\end{document}


